jQuery("#video_seo_done").hide();function update_bar(a){if(a>100){a=99}a=Math.round(a*100)/100;jQuery(".bar","#video_seo_progressbar").css("width",a+"%");jQuery("#video_seo_percentage_hidden").val(a);if(a>=5){jQuery(".bar_status","#video_seo_progressbar").html(a+"%")}else{jQuery(".bar_status","#video_seo_progressbar").html("&nbsp;")}}function video_fetch(h){var d=parseInt(jQuery("#video_seo_total_posts").html());var g=jQuery("#video_seo_force_reindex").length;var e={action:"index_posts",type:"index",start:h,total:d,portion:5,nonce:jQuery("#videoseo-nonce-ajax").val()};if(g>0){e.force="on"}jQuery.post(ajaxurl,e,function(i){if(h<d){setTimeout(function(){video_fetch((h+5))},200);calculate_to_go(h,d,i)}else{update_bar(100);jQuery("#video_seo_total_time").html("&nbsp;");jQuery("#video_seo_done").show()}});var b=d-h;if(b<0){b=0}jQuery("#video_seo_posts_to_go").html(b);var c=(5/d)*100;var a=parseFloat(jQuery("#video_seo_percentage_hidden").val());var f=c+a;update_bar(f)}function calculate_to_go(f,d,e){var b=d-f;var c=b/5;var a=c*parseInt(e);if(a==Infinity){jQuery("#video_seo_total_time").html("Unknown")}else{jQuery("#video_seo_total_time").html(Math.round(a)+" seconds")}}function get_total_posts(){update_bar(0);var a={action:"index_posts",type:"total_posts",nonce:jQuery("#videoseo-nonce-ajax").val()};jQuery.post(ajaxurl,a,function(b){var c=b;jQuery("#video_seo_total_posts").html(c);video_fetch(0)})}setTimeout(function(){get_total_posts()},500);